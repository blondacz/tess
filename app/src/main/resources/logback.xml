<configuration>
    <!-- levels overridable via env -->
    <property name="LOG_LEVEL" value="${LOG_LEVEL:-INFO}"/>
    <property name="PEKKO_LOG_LEVEL" value="${PEKKO_LOG_LEVEL:-INFO}"/>
    <property name="KAFKA_LOG_LEVEL" value="${KAFKA_LOG_LEVEL:-WARN}"/>

    <!-- Console only; no files -->
    <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
        <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
            <!-- compact, kube-friendly single line -->
            <pattern>%d{ISO8601} %-5level [%thread] %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>

    <!-- Non-blocking logging so your app isn't slowed by stdout -->
    <appender name="ASYNC" class="ch.qos.logback.classic.AsyncAppender">
        <appender-ref ref="STDOUT"/>
        <queueSize>8192</queueSize>
        <discardingThreshold>0</discardingThreshold>
        <neverBlock>true</neverBlock>
    </appender>

    <!-- Reduce noisy libs -->
    <logger name="org.apache.pekko" level="${PEKKO_LOG_LEVEL}"/>
    <logger name="org.apache.kafka" level="${KAFKA_LOG_LEVEL}"/>
    <logger name="org.apache.kafka.clients" level="${KAFKA_LOG_LEVEL}"/>
    <logger name="org.apache.kafka.common.network" level="${KAFKA_LOG_LEVEL}"/>

    <root level="${LOG_LEVEL}">
        <appender-ref ref="ASYNC"/>
    </root>
</configuration>
